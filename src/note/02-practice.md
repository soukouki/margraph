# noteのプラクティス

## 処理を小さなスクリプトに分ける

- スクリプトに違う言語や技術を利用できる
  - 例えば、rubyのプロセス起動が遅ければC言語に書き換える、といったことができる
- データの入出力が明確になるので、疎結合になる

## スクリプトの起動はmakeを使う

- ファイル同士の依存関係であったり、並列実行が単純なコマンドでできて便利
- 多くの環境で利用でき、インストールなどが必要ない事が多い
- 広く利用されている

## データのやり取りはファイルの読み書きで行う

- makefileとの相性が良い
- 標準出力をデバッグなどに利用できる
- 各言語から簡単に利用できる

## ファイルの形式はjsonを使う

- 人間が直接読み書きできる
- プログラムから扱いやすい
  - 少なくともライブラリとして提供されている可能性はかなり高い
- 解析が高速
- 参照などによる問題が起こらない
- インデントなどのによるファイルの肥大が起こらない
- Merge Jsonを使って、マージの処理を再利用できる

## パスのフォーマット

`src/aaa/bbb.md`ファイルであれば、`"aaa/bbb"`のように表す(拡張子も省略する)。
`tmp/aaa/bbb`ディレクトリであれば、`"aaa/bbb"`のように表す。
`.`や`..`、`//`などは使わない。先頭と末尾に`/`は付けない。

- 統一することで、バグの機会をなくす
- `/`の個数を数えればディレクトリやファイルの深さがわかるようにする
- ディレクトリや拡張子を変更する際に、パスを足すだけでリンクになるようにする

## 入出力の形式はドキュメント化する

- 入出力の形式を変えづらくし、疎結合な状態が保たれるようにする

## スクリプト同士はディレクトリを分ける

- 安易に共有ライブラリを持たないようにする
  - 共有ライブラリを持つときは、疎結合が損なわれている可能性がある

## 実行に失敗したら、プロセスの戻り値を0以外にする

- makefileの仕様で、戻り値を0以外にすると自動で失敗してくれる

## ファイルとディレクトリの命名規則はケバブケース

- 言語的に決まっているなどの例外がなければ、ケバブケースを用いる
