# note用中間表現

中間の表現は目次と記事で共用する予定。そうすれば、中間表現からHTMLへの変換を1つのプログラムを使って行える。だめだったら・・・うーん、また考える。

前のバージョンの、HTML混じりのマークダウンで行っていたものを中間表現に置き換える。記事として、機能を直接表すように気をつける。

工数は増えるけれど、これは疎結合・高凝縮性の確保のために必要なんじゃないかな。これまではHTMLを生成する箇所が色んな場所に別れていたせいで、最終的な表示のためのコードがいろんな箇所に散らかってしまった。また、Markdownパーサーが生成したタグに表示用のクラスをつけることができなくて、その部分にbootstrapを設定できなかった。

文中で出る、1行のコードブロックや文字装飾、LaTeXはHTMLを直接埋め込む。Markdownの文字装飾について、それぞれの中間表現を作るとかなり手間だし、既存のMarkdownパーサーを使ってうまくやるようにする。

## 記事の中間表現
```md
# タイトル

タイトル直下のテキスト

段落毎に分けておく

## h2用タイトル


```
```json
{
  "title": "タイトル",
  "contents": [
    {
      "type": "paragraphs",
      "paragraphs": [
        "タイトル直下のテキスト",
        "段落毎に分けておく"
      ]
    },
    {
      "type": "title",
      "depth": 2,
      "text": "h2用タイトル"
    },
    {
      "type": "paragraphs",
      "paragraphs": [
        "<code>文字装飾などについては、HTMLを直接埋め込む</code>",
        "改行なんかは\nそのままにしておく。andのような特殊文字は&lt;とする(Markdownパーサーを使う性質上このほうが楽)"
      ]
    }
  ],
  "prev": {
    "title": "前の記事のタイトル"
  }
}
```

目次の中間表現
```json
```